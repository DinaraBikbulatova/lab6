# Лабораторная работа 6: Рефакторинг и code smells
Необходимо научиться находить code smells в реальном коде и применять рефакторинг для улучшения его структуры без изменения поведения

## Обнаруженные проблемы качества кода
### 1. **Длинный метод (Long Method)**
- Исходная функция `process_checkout()` содержала более 60 строк кода
- Совмещала множество различных ответственностей в одной функции

### 2. **Магические числа (Magic Numbers)**
- В коде были разбросаны числовые значения без объяснения:
  - `0.10`, `0.20`, `0.05` - проценты скидок
  - `0.21` - процент налога
  - `50`, `10` - фиксированные скидки
  - `200`, `100` - пороговые значения для скидок

### 3. **Повторяющийся код**
- Многократные проверки условий в одном месте
- Смешение разных уровней абстракции

### 4. **Сложные условные конструкции**
- Вложенные if/elif операторы для расчета скидок
- Логика скидок перемешана с основной бизнес-логикой

## Выполненные рефакторинги
### 1. **Извлечение методов (Extract Method)**
Большая функция `process_checkout()` разделена на 9 небольших функций, каждая с одной ответственностью:
- `parse_request()` - парсинг входных данных
- `validate_order_data()` - проверка обязательных полей
- `validate_items()` - валидация структуры товаров
- `calculate_subtotal()` - расчет суммы заказа
- `calculate_discount()` - расчет скидки
- `apply_discount()` - применение скидки
- `calculate_tax()` - расчет налога
- `generate_order_id()` - генерация ID заказа
- `build_order_response()` - формирование итогового ответа

### 2. Замена магических чисел константами (Replace Magic Number with Symbolic Constant)
### 3. Группировка констант - словари для скидок и порогов
### 4. Улучшение читаемости - код читается как последовательность шагов

## Выводы
Рефакторинг позволил превратить монолитную функцию в набор простых, переиспользуемых компонентов. 

Код стал:

- Более понятным - каждая функция делает одну вещь

- Более поддерживаемым - изменения локализованы

- Более тестируемым - каждый компонент можно тестировать отдельно

- Более расширяемым - легко добавлять новую функциональность
